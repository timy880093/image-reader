# Manga Reader è·¯ç”±åˆ†é›¢åŠŸèƒ½èªªæ˜

## æ›´æ–°å…§å®¹

å·²æˆåŠŸå°‡ Manga Reader æ”¹ç‚ºä½¿ç”¨ä¸åŒè·¯ç”±ä¾†åˆ†åˆ¥ç€è¦½ã€Œæ¼«ç•«ã€å’Œã€ŒGalleryã€å…©å€‹ä¸åŒçš„å…§å®¹åˆ†é¡ï¼Œä¸å†ä½¿ç”¨åˆ†é åˆ‡æ›æ–¹å¼ã€‚

## åŠŸèƒ½ç‰¹é»

### 1. ç¨ç«‹è·¯ç”±è¨­è¨ˆ
- **ğŸ“š æ¼«ç•«è·¯ç”±**ï¼š`/manga` - é¡¯ç¤ºæ¼«ç•«ç›®éŒ„ä¸­çš„å…§å®¹
- **ğŸ¨ Gallery è·¯ç”±**ï¼š`/gallery` - é¡¯ç¤º Gallery ä½œå“ç›®éŒ„ä¸­çš„å…§å®¹
- **ğŸ  é¦–é **ï¼š`/` - è‡ªå‹•é‡å®šå‘åˆ°æ¼«ç•«åˆ—è¡¨

### 2. RESTful API è¨­è¨ˆ
```
æ¼«ç•«ç›¸é—œï¼š
- GET /manga              - æ¼«ç•«åˆ—è¡¨é é¢
- GET /api/manga/list     - ç²å–æ¼«ç•«åˆ—è¡¨ï¼ˆJSONï¼‰
- GET /manga/reader/{path} - æ¼«ç•«é–±è®€å™¨
- GET /manga/image/{path}  - æ¼«ç•«åœ–ç‰‡

Galleryç›¸é—œï¼š
- GET /gallery              - Galleryåˆ—è¡¨é é¢
- GET /api/gallery/list     - ç²å–Galleryåˆ—è¡¨ï¼ˆJSONï¼‰
- GET /gallery/reader/{path} - Galleryé–±è®€å™¨
- GET /gallery/image/{path}  - Galleryåœ–ç‰‡
```

### 3. ç¨ç«‹è·¯å¾‘é…ç½®
åœ¨ `config.toml` ä¸­é…ç½®å…©å€‹ä¸åŒçš„è·¯å¾‘ï¼š

```toml
[manga]
# æ¼«ç•«è³‡æ–™å¤¾è¨­å®š
root_path = "E:/test/manga"       # æ¼«ç•«æ ¹ç›®éŒ„è·¯å¾‘

# Gallery ä½œå“è³‡æ–™å¤¾è¨­å®š
gallery_root_path = "E:/test/gallery"  # Gallery ä½œå“æ ¹ç›®éŒ„è·¯å¾‘
```

### 4. å°èˆªåˆ‡æ›
- åœ¨åˆ—è¡¨é é¢é ‚éƒ¨æœ‰ã€ŒğŸ“š æ¼«ç•«ã€å’Œã€ŒğŸ¨ Galleryã€çš„å°èˆªéˆæ¥
- é»æ“Šå¯åœ¨å…©å€‹åˆ†é¡é–“åˆ‡æ›
- ç•¶å‰åˆ†é¡æœƒæœ‰è¦–è¦ºé«˜äº®é¡¯ç¤º

### 5. å®Œæ•´åŠŸèƒ½æ”¯æŒ
- âœ… ç¨ç«‹çš„å…§å®¹åˆ—è¡¨
- âœ… å°é¢åœ–ç‰‡é¡¯ç¤º
- âœ… ç« ç¯€å°èˆª
- âœ… åœ–ç‰‡æ‡¶åŠ è¼‰
- âœ… æœå°‹åŠŸèƒ½
- âœ… è·¯ç”±å®Œå…¨ç¨ç«‹ï¼Œäº’ä¸å¹²æ“¾
- âœ… URL æ›´æ¸…æ™°æ˜“æ‡‚

## ä½¿ç”¨æ–¹æ³•

### 1. é…ç½®è·¯å¾‘
ç·¨è¼¯ `e:\_code\vibe\rouman-grapper\config.toml`ï¼š
```toml
[manga]
root_path = "ä½ çš„æ¼«ç•«è³‡æ–™å¤¾è·¯å¾‘"
gallery_root_path = "ä½ çš„Galleryè³‡æ–™å¤¾è·¯å¾‘"
```

### 2. å•Ÿå‹•æ‡‰ç”¨
åœ¨ `manga_reader` ç›®éŒ„ä¸‹åŸ·è¡Œï¼š
```powershell
.\venv\Scripts\activate
python app.py
```

### 3. ç€è¦½å…§å®¹
- é–‹å•Ÿç€è¦½å™¨è¨ªå• `http://localhost:5000`
- é»æ“Šã€ŒğŸ“š æ¼«ç•«ã€æˆ–ã€ŒğŸ¨ Galleryã€åˆ†é åˆ‡æ›å…§å®¹
- é»æ“Šä½œå“é€²å…¥é–±è®€

## æŠ€è¡“å¯¦ç¾

### å¾Œç«¯ä¿®æ”¹ (app.py)
- æ–°å¢ `Gallery_ROOT` è·¯å¾‘è®Šé‡
- æ–°å¢ `gallery_reader` è®€å–å™¨å¯¦ä¾‹
- æ‰€æœ‰ API ç«¯é»æ”¯æŒ `category` æŸ¥è©¢åƒæ•¸
- æ ¹æ“šåˆ†é¡è‡ªå‹•é¸æ“‡å°æ‡‰çš„è·¯å¾‘å’Œè®€å–å™¨

### å‰ç«¯ä¿®æ”¹ (index.html)
- æ–°å¢åˆ†é æŒ‰éˆ• UI
- æ–°å¢ `currentCategory` ç‹€æ…‹ç®¡ç†
- `switchTab()` å‡½æ•¸è™•ç†åˆ†é åˆ‡æ›
- æ‰€æœ‰ API è«‹æ±‚è‡ªå‹•é™„å¸¶åˆ†é¡åƒæ•¸

### é–±è®€å™¨ä¿®æ”¹ (reader.html)
- å¾ URL æŸ¥è©¢åƒæ•¸è®€å–åˆ†é¡
- åœ–ç‰‡è¼‰å…¥å’Œç« ç¯€å°èˆªä¿æŒåˆ†é¡ä¸€è‡´
- è¿”å›æŒ‰éˆ•ä¿æŒåœ¨æ­£ç¢ºçš„åˆ†é 

## æ–‡ä»¶å¤¾çµæ§‹è¦æ±‚

å…©å€‹è·¯å¾‘çš„æ–‡ä»¶å¤¾çµæ§‹æ‡‰è©²ç›¸åŒï¼š

```
manga/
â”œâ”€â”€ ä½œå“1/
â”‚   â”œâ”€â”€ ç¬¬1è©±/
â”‚   â”‚   â”œâ”€â”€ 001.jpg
â”‚   â”‚   â”œâ”€â”€ 002.jpg
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ç¬¬2è©±/
â”‚       â””â”€â”€ ...
â””â”€â”€ ä½œå“2/
    â””â”€â”€ ...

gallery/
â”œâ”€â”€ ä½œè€…1/
â”‚   â”œâ”€â”€ ä½œå“é›†1/
â”‚   â”‚   â”œâ”€â”€ 001.jpg
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ä½œå“é›†2/
â”‚       â””â”€â”€ ...
â””â”€â”€ ä½œè€…2/
    â””â”€â”€ ...
```

## æ³¨æ„äº‹é …

1. ç¢ºä¿å…©å€‹è·¯å¾‘éƒ½å­˜åœ¨ä¸”å¯è¨ªå•
2. æ”¯æŒçš„åœ–ç‰‡æ ¼å¼ï¼š`.jpg`, `.jpeg`, `.png`, `.gif`, `.webp`, `.bmp`, `.tiff`
3. æ–‡ä»¶å¤¾å‘½åæ”¯æŒä¸­æ–‡
4. å»ºè­°ä½¿ç”¨çµ•å°è·¯å¾‘é…ç½®

## å‡ç´šèªªæ˜

å¦‚æœæ‚¨å¾èˆŠç‰ˆæœ¬å‡ç´šï¼š
1. æ›´æ–° `config.toml` æ·»åŠ  `gallery_root_path` é…ç½®
2. æ›´æ–° `requirements.txt` ä¸­çš„ Pillow ç‰ˆæœ¬ï¼ˆå·²æ”¹ç‚º `>=10.2.0`ï¼‰
3. é‡æ–°å®‰è£ä¾è³´ï¼š`pip install -r requirements.txt`
4. é‡å•Ÿæ‡‰ç”¨å³å¯ä½¿ç”¨æ–°åŠŸèƒ½
